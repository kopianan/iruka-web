function readURL(n){if(n.files&&n.files[0])if(n.files[0].size>30194304)toastr.error("3mb is maximum accepted file size!"),n.value="";else{let i=new FileReader,t=n.files[0].name.split(".").pop().toLowerCase(),r=["jpg","jpeg","png"].indexOf(t)>-1;t=="jpg"&&(t="jpeg");r?(i.fileName=n.files[0].name,i.onload=function(n){$("#imagePreview").css("background-image","url("+n.target.result+")");$("#imagePreview").hide();$("#imagePreview").fadeIn(650);imageDataUrl=n.target.result;imageName=n.target.fileName;imageExtension=t;$("#Base64URL").val(imageDataUrl.replace("data:image/"+imageExtension+";base64,",""));$("#PicturePath").val(imageName)},i.readAsDataURL(n.files[0])):toastr.error(`Can't read file name!`)}}function readURLCertificate(n){if(n.files&&n.files[0])if(n.files[0].size>30194304)toastr.error("3mb is maximum accepted file size!"),n.value="";else{let i=new FileReader,t=n.files[0].name.split(".").pop().toLowerCase(),r=["jpg","jpeg","png"].indexOf(t)>-1;t=="jpg"&&(t="jpeg");r?(i.fileName=n.files[0].name,i.onload=function(n){$("#certificatePreview").css("background-image","url("+n.target.result+")");$("#certificatePreview").hide();$("#certificatePreview").fadeIn(650);certificateDataUrl=n.target.result;certificateName=n.target.fileName;certificateExtension=t;$("#Base64URLCertificate").val(certificateDataUrl.replace("data:image/"+certificateExtension+";base64,",""));$("#CertificatePath").val(certificateName);$(".certificate-container").removeClass("d-none")},i.readAsDataURL(n.files[0])):toastr.error(`Can't read file name!`)}}function initDataTable(){try{dataTable=$("#user-table").DataTable({pageLength:10,scrollX:!0,paging:!0,order:[],info:!1,bPaginate:!1,bLengthChange:!1,bFilter:!0,bInfo:!1,bAutoWidth:!1,dom:"Bfrtip"})}catch(n){toastr.error(`There has been an error initiating the DataTable! Error: ${n}`)}}function deleteUser(n,t){$.confirm({title:"Delete user ?",content:`You won't be able to revert this!`,buttons:{yes:{text:"Yes!",btnClass:"btn-red",action:function(){$.ajax({async:!1,url:"/Account/DeleteUser",data:"{ 'id': '"+n+"' }",dataType:"json",type:"POST",contentType:"application/json; charset=utf-8",dataFilter:function(n){return n},success:function(n){n.success!=undefined?($.alert("Deleted successfully!"),t?window.location.replace("/Account/InternalUserRegister"):window.location.replace("/Account/EndUserRegister")):$.alert({title:"Encountered an error!",content:`Can't delete user, please contact support!`,text:"Cancelled!",type:"orange",typeAnimated:!0})},error:function(){}})}},cancel:{text:"Cancel!",btnClass:"btn-green",keys:["enter"],action:function(){$.alert("Cancelled!")}}}})}function InitCitySearchAutoComplete(){let t=$("#CoverageArea"),n={},i=new kendo.data.DataSource({transport:{read:function(n){var t=[];$.ajax({url:`/API/External/GetAllCitiesOfIndonesia`,method:"GET",dataType:"json",contentType:"application/json",async:!1,success:function(n){t=n},error:function(n){let{responseJSON:t}=n;ClinicGlobal.ShowNotification({text:`There has been an error retrieving data from the server!
                                                                                                                                                                                                                Exception: ${t.ExceptionMessage}`,type:"error",timeout:!1})}});n.success(t)}}});n.select=function(){};n.dataSource=i;n.placeholder="Search city...";Global.InitKendoAutoComplete(t,n)}let imageDataUrl="",imageName="",imageExtension="",certificateDataUrl="",certificateName="",certificateExtension="";$("#imageUpload").change(function(){readURL(this)});$("#certificateUpload").change(function(){readURLCertificate(this)});$(document).ready(function(){initDataTable();InitCitySearchAutoComplete()});